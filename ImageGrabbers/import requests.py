import requests
import json
import shutil
import re

response = requests.get("https://collectionapi.metmuseum.org/public/collection/v1/search?q=*&hasImages=true")
#print(response.json()) 
targetAR = round(800/600,2)
finalArr = []

objectList = response.json()['objectIDs']
for object in objectList:
    objectResponse = requests.get("https://collectionapi.metmuseum.org/public/collection/v1/objects/" + str(object))
    try:
        width = objectResponse.json()['measurements'][0]['elementMeasurements']['Width']
        height = objectResponse.json()['measurements'][0]['elementMeasurements']['Height']
        ratio = round(width/height,2)
        if(ratio >=1.25 and ratio <=1.77):
            finalArr.append(objectResponse.json()["primaryImage"])
            curImg = objectResponse.json()["primaryImage"]
            if curImg != '':
                res = requests.get(curImg, stream = True)
                if res.status_code == 200:
                    fileName = "C:/Users/nigel/OneDrive/Pictures/ART/" + curImg[curImg.find('original/')+9:]
                    with open(fileName, 'wb') as f:
                        shutil.copyfileobj(res.raw, f)
                else:
                    print('Image Couldn\'t be retrieved')
    except:
        pass

#finalArr = ['https://images.metmuseum.org/CRDImages/dp/original/DP814199.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP814201.jpg', 'https://images.metmuseum.org/CRDImages/md/original/MED47.jpg', '', 'https://images.metmuseum.org/CRDImages/ph/original/DT1161.jpg', 'https://images.metmuseum.org/CRDImages/es/original/DP224276.jpg', 'https://images.metmuseum.org/CRDImages/rl/original/SLP1553-1.jpg', 'https://images.metmuseum.org/CRDImages/cl/original/DT4118.jpg', '', '', '', '', '', 'https://images.metmuseum.org/CRDImages/is/original/DP167067.jpg', '', '', 'https://images.metmuseum.org/CRDImages/eg/original/DP152088.jpg', 'https://images.metmuseum.org/CRDImages/es/original/sf33_153_1.jpg', 'https://images.metmuseum.org/CRDImages/es/original/DT8910.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP870096.jpg', '', 'https://images.metmuseum.org/CRDImages/ep/original/DP232030.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884507.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884506.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP164837.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DT1387.jpg', '', '', '', 'https://images.metmuseum.org/CRDImages/ep/original/DP-13139-001.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP820765.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DT4167.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-24221-001.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-15762-001.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP340180.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-25465-001.jpg', 'https://images.metmuseum.org/CRDImages/es/original/DP105733.jpg', 'https://images.metmuseum.org/CRDImages/is/original/DP236378.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP231550.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DT1565.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP878062.jpg', 'https://images.metmuseum.org/CRDImages/eg/original/DT200592.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP831802.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP-21533-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP855324.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-25466-001.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP375450_cropped.jpg', 'https://images.metmuseum.org/CRDImages/ad/original/ap17.66.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DT47.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP888825.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-17629-001.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DT9354.jpg', '', 'https://images.metmuseum.org/CRDImages/as/original/43842.jpg', 'https://images.metmuseum.org/CRDImages/as/original/43840.jpg', '', 'https://images.metmuseum.org/CRDImages/ep/original/DP150998.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-1009-001.jpg', 'https://images.metmuseum.org/CRDImages/es/original/DP106636.jpg', 'https://images.metmuseum.org/CRDImages/es/original/DP251957.jpg', 'https://images.metmuseum.org/CRDImages/is/original/DP236049.jpg', 'https://images.metmuseum.org/CRDImages/as/original/1984_476_recto.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP808675.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP809034.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-19486-001.jpg', '', 'https://images.metmuseum.org/CRDImages/ep/original/DP-687-001.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DT1567.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-16339-001.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-19457-001.jpg', 'https://images.metmuseum.org/CRDImages/is/original/DP240649.jpg', '', '', 'https://images.metmuseum.org/CRDImages/ep/original/DP119115.jpg', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP820849.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-15888-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP821758.jpg', '', '', 'https://images.metmuseum.org/CRDImages/is/original/DP234018.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP817770.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884167.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DT11327.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP883732.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP883734.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP883733.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP884660.jpg', 'https://images.metmuseum.org/CRDImages/is/original/DT11810.jpg', 'https://images.metmuseum.org/CRDImages/as/original/DP147688.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP143181.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/150489.jpg', '', '', 'https://images.metmuseum.org/CRDImages/ep/original/DP-31520-001.jpg', 'https://images.metmuseum.org/CRDImages/as/original/DP-26658-001.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP854865.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP820810.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP815649.jpg', '', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP853624.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP871767.jpg', 'https://images.metmuseum.org/CRDImages/es/original/DP236918.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP819060.jpg', '', '', 'https://images.metmuseum.org/CRDImages/ph/original/DP310797.jpg', '', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP821544.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP820807.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP869601.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP883819.jpg', 'https://images.metmuseum.org/CRDImages/an/original/DT874.jpg', 'https://images.metmuseum.org/CRDImages/es/original/DP169174.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DT10856.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP878076.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884684.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884685.jpg', '', 'https://images.metmuseum.org/CRDImages/as/original/1981_4_1a.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP869117.jpg', '', 'https://images.metmuseum.org/CRDImages/es/original/es1974.356.121.R.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP876958.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP817478.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP861769.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP859564.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP869116.jpg', 'https://images.metmuseum.org/CRDImages/is/original/DP299957.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/EP542.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP831350.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP831804.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP-19110-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP874144.jpg', '', '', '', '', '', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP884309.jpg', '', '', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP821401.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP804673.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP821395.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP-31695-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP820853.jpg', 'https://images.metmuseum.org/CRDImages/as/original/BarBoi_06.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DT1859.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP273761.jpg', 'https://images.metmuseum.org/CRDImages/as/original/DP162807.jpg', 'https://images.metmuseum.org/CRDImages/is/original/sf14-84r.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP-12939-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884799.jpg', 'https://images.metmuseum.org/CRDImages/rl/original/DP159773.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-19542-001.jpg', '', '', 'https://images.metmuseum.org/CRDImages/ep/original/DT1924.jpg', 'https://images.metmuseum.org/CRDImages/as/original/DP702075.jpg', '', '', 'https://images.metmuseum.org/CRDImages/as/original/34_89_recto.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP-33173-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/MM59517.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP354135.jpg', '', 'https://images.metmuseum.org/CRDImages/is/original/DP257990.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP877878.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP804676.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884800.jpg', '', 'https://images.metmuseum.org/CRDImages/ad/original/APS2263.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP831348.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP805647.jpg', '', '', '', '', 'https://images.metmuseum.org/CRDImages/ep/original/DP268211.jpg', '', '', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP884749.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884748.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP873714.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP883681.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-13338-001.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-19421-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884354.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP885138.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP883777.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884352.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884353.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP883693.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884745.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884744.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP808200.jpg', '', '', '', 'https://images.metmuseum.org/CRDImages/eg/original/LC-22_1_272_EGDP033039.jpg', '', 'https://images.metmuseum.org/CRDImages/ph/original/DT237387.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP818314.jpg', 'https://images.metmuseum.org/CRDImages/ph/original/DP147946.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP-33175-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP883190.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP861773.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP873713.jpg', 'https://images.metmuseum.org/CRDImages/as/original/DP221397.jpg', '', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP361967.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP257247.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP-32295-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP877852.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP221761.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-17680-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP890599.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP888812.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP243404.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP884001.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP-13336-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP883746.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP885137.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP880304.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884000.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884521.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884522.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP881751.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884185.jpg', 'https://images.metmuseum.org/CRDImages/as/original/DP-14152-011.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP873895.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DT1967.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP-26796-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP-31720-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP-31722-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP855248.jpg', '', '', '', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP801454.jpg', 'https://images.metmuseum.org/CRDImages/ep/original/DP148490.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP883739.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP801541.jpg', 'https://images.metmuseum.org/CRDImages/ph/original/DP165642.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP813169.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP871960.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DT9291.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP140839.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP-12920-001.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP801479.jpg', 'https://images.metmuseum.org/CRDImages/an/original/DP110495.jpg', 'https://images.metmuseum.org/CRDImages/an/original/DP110474.jpg', 'https://images.metmuseum.org/CRDImages/ao/original/DP-26714-001.jpg', 'https://images.metmuseum.org/CRDImages/as/original/2015_300_248_S1_Burke.jpg', 'https://images.metmuseum.org/CRDImages/as/original/DP-12232-175.jpg', 'https://images.metmuseum.org/CRDImages/as/original/DP357987.jpg', '', 'https://images.metmuseum.org/CRDImages/dp/original/DP808477.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP889529.jpg', 'https://images.metmuseum.org/CRDImages/dp/original/DP884400.jpg']


# for curImg in finalArr:
# #curImg = 'https://images.metmuseum.org/CRDImages/ep/original/DP-19486-001.jpg'
#     if curImg != '':
#         res = requests.get(curImg, stream = True)

#         if res.status_code == 200:
#             fileName = "C:/Users/nigel/OneDrive/Pictures/ART/" + curImg[curImg.find('original/')+9:]
#             with open(fileName, 'wb') as f:
#                 shutil.copyfileobj(res.raw, f)
#         else:
#             print('Image Couldn\'t be retrieved')



